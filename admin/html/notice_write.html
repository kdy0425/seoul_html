<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=1200"/>
<link rel="canonical" href="">
<link rel="shortcut icon" type="image/x-icon" href="">
<meta name="keywords" content="">
<meta name="description" content="">
<meta property="og:title" content=""/>
<meta property="og:url" content="" />
<meta property="og:image" content="" />
<meta property="og:site_name" content=""/>
<meta property="og:description" content="" />
<title>서울특별시 임산부 교통비 지원 업무 시스템</title>
<link rel="stylesheet" type="text/css" href="../assets/css/normalize.css" />
<link rel="stylesheet" type="text/css" href="../assets/css/common.css" />
<link rel="stylesheet" type="text/css" href="../assets/css/content.css" />
<link rel="stylesheet" type="text/css" href="../assets/css/jquery-ui.css" />
<script src="../assets/js/jquery-1.11.3.min.js"></script>
<script src="../assets/js/apexcharts.js"></script>
</head>
<body>

<!-- wrap -->
<div id="layout">
	<h1 id="header_h1">서울특별시 임산부 교통비 지원 업무 시스템</h1>
	<div id="skip_to_container">
		<!-- skip navigation -->
		<a href="#content">내용 바로가기</a>
		<a href="#nav">서비스메뉴 바로가기</a>
	</div>
	<hr class="hide" />	

	<!-- header -->
	<div id="header">
		<div class="hd_top">
			<div class="container">
				<div id="logo">
					<a href="#">
						<img src="../assets/images/logo.jpg" alt="서울특별시 임산부 교통비 지원 업무 시스템">
					</a>
				</div>
				<div class="hd_rt">
					<span class="hd_welcome"><span class="name">홍길동</span><span class="area">(서울시)</span>님 반갑습니다.</span>
					<ul class="hd_links">
						<li><a href="javascript:;">회원정보변경</a></li>
						<li><a href="javascript:;">로그아웃</a></li>
						<li class="alram"><a href="javascript:;"><span class="sound_only">알림</span><span class="count">6</span></a></li>
						<li class="alram"><a href="javascript:;"><span class="sound_only">알림</span><span class="count">10+</span></a></li><!-- 10초과일 때 (10+) -->
					</ul>
					
				</div>
			</div>
		</div>
		<div class="hd_bottom">
			<div class="container">
				<ul id="nav">
					<li><a href="javascript:;">신청접수</a>
						<ul>
							<li><a href="javascript:;">신청접수 현황</a></li>
							<li><a href="javascript:;">신규신청</a></li>
						</ul>
					</li>
					<li><a href="javascript:;">사용현황</a>
						<ul>
							<li><a href="javascript:;">사용내역</a></li>
						</ul>
					</li>
					<li><a href="javascript:;">정산현황</a>
						<ul>
							<li><a href="javascript:;">정산내역</a></li>
						</ul>
					</li>
					<li><a href="javascript:;">커뮤니티</a>
						<ul>
							<li><a href="javascript:;">공지사항</a></li>
							<li><a href="javascript:;">자주하는 질문</a></li>
						</ul>
					</li>
					<li><a href="javascript:;">통계</a>
						<ul>
							<li><a href="javascript:;">신청현황</a></li>
							<li><a href="javascript:;">바우처 지급 현황</a></li>
							<li><a href="javascript:;">바우처 불용 현황</a></li>
						</ul>
					</li>
					<li><a href="javascript:;">사용자</a>
						<ul>
							<li><a href="javascript:;">사용자 관리</a></li>
						</ul>
					</li>
				</ul>
			</div>
			<span class="nav_bg"></span>
		</div>
	</div>
	<!-- //header -->	

	<!-- content -->
	<div id="content">
		<div class="sub_content container">
			
			<div class="pg_title">공지사항 등록</div>
			
			<form method="post" action="" enctype="multipart/form-data">
			<div class="form_box">
				<div class="form_table">
					<table>
						<colgroup>
							<col style="width:180px;">
							<col style="width:400px;">
							<col style="width:180px;">
							<col style="width:420px;">
						</colgroup>
						<tbody>
							<tr>
								<th><span class="req">사이트종류</span></th>
								<td>
									<div class="ip_group">
										<div class="design_select md">
											<input type="hidden">
											<a href="javascript:;" class="ds_value type1">전체</a>
											<div class="ds_options" style="display: none;"> 
												<div id="" class="ds_cnt">
													<ul class="ds_list">
														<li><a href="javascript:;" class="ds_option" data-rel="전체">전체</a></li>
														<li><a href="javascript:;" class="ds_option" data-rel="업무시스템">업무시스템</a></li>
													</ul>
												</div>
												<a href="javascript:;" class="ds_bg">옵션 닫기</a>
											</div>
										</div>
									</div>
								</td>
								<th><span class="req">게시여부</span></th>
								<td>
									<div class="ft_labels">
										<label class="radiobox inline"><input type="radio" name="radio1"><span></span>게시</label>
										<label class="radiobox inline"><input type="radio" name="radio1"><span></span>미게시</label>
									</div>
								</td>
							</tr>
							<tr>
								<th><span class="req">상단고정여부</span></th>
								<td>
									<div class="ft_labels">
										<label class="radiobox inline"><input type="radio" name="radio2"><span></span>사용</label>
										<label class="radiobox inline"><input type="radio" name="radio2"><span></span>미사용</label>
									</div>
								</td>
								<th><span class="req">게시기간</span></th>
								<td>
									<div class="ft_labels">
										<label class="radiobox inline"><input type="radio" name="radio3" value="0"><span></span>무제한</label>
										<label class="radiobox inline"><input type="radio" name="radio3" value="1"><span></span>기간설정</label>
									</div>

									<div id="writePeriod" class="mgt10" style="display:none;">
										<div class="ip_group">
											<input type="text" class="datepicker sm" readonly="" placeholder="게시 시작일">
											<div class="design_select xs">
												<input type="hidden">
												<a href="javascript:;" class="ds_value type1">시</a>
												<div class="ds_options" style="display: none;"> 
													<div id="" class="ds_cnt">
														<ul class="ds_list time_hour">
														</ul>
													</div>
													<a href="javascript:;" class="ds_bg">옵션 닫기</a>
												</div>
											</div>
											<div class="design_select xs">
												<input type="hidden">
												<a href="javascript:;" class="ds_value type1">분</a>
												<div class="ds_options" style="display: none;"> 
													<div id="" class="ds_cnt">
														<ul class="ds_list time_minute">
														</ul>
													</div>
													<a href="javascript:;" class="ds_bg">옵션 닫기</a>
												</div>
											</div>
										</div>
										<div class="ip_group">
											<input type="text" class="datepicker sm" readonly="" placeholder="게시 종료일">
											<div class="design_select xs">
												<input type="hidden">
												<a href="javascript:;" class="ds_value type1">시</a>
												<div class="ds_options" style="display: none;"> 
													<div id="" class="ds_cnt">
														<ul class="ds_list time_hour">
														</ul>
													</div>
													<a href="javascript:;" class="ds_bg">옵션 닫기</a>
												</div>
											</div>
											<div class="design_select xs">
												<input type="hidden">
												<a href="javascript:;" class="ds_value type1">분</a>
												<div class="ds_options" style="display: none;"> 
													<div id="" class="ds_cnt">
														<ul class="ds_list time_minute">
														</ul>
													</div>
													<a href="javascript:;" class="ds_bg">옵션 닫기</a>
												</div>
											</div>
										</div>
									</div>
								
									<script>
									for(let i = 0; i < 24; i++){
										$('.time_hour').append(
											'<li><a href="javascript:;" class="ds_option" data-rel="'+ i +'시">'+ i +'시</a></li>'
										)
									}
									for(let i = 0; i < 60; i++){
										$('.time_minute').append(
											'<li><a href="javascript:;" class="ds_option" data-rel="'+ i +'분">'+ i +'분</a></li>'
										)
									}
									$('input[name="radio3"]').change(function(){
										let radioVal = $('input[name="radio3"]:checked').val();
										if(radioVal == '1'){
											$('#writePeriod').show();
										}else{
											$('#writePeriod').hide();
										}
									});
									</script>
								</td>
							</tr>
							<tr>
								<th><span class="req">제목</span></th>
								<td colspan="3">
									<input type="text" class="xl">
								</td>
							</tr>
							<tr>
								<th><span class="req">글내용</span></th>
								<td colspan="3">
									<textarea name="" id="" class="edit"></textarea>
								</td>
							</tr>
							<tr>
								<th>파일첨부</th>
								<td colspan="3">
									<div class="file_upload">
										<label class="file_label btn btn1"><input type="file" onchange="addFile(this);" multiple />파일찾기</label>
										<div class="file_list"></div>
									</div>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			</div>

			<div class="form_btn">
				<a href="#" class="btn submit md">등록</a>
				<a href="#" class="btn line md">목록</a>
			</div>
			</form>

		</div>
	</div>
	<!-- //content -->

	<div id="footer">
		<div class="container">
			<span class="ft_copy">COPYRIGHT Ⓒ 2021 상생소비지원금 ALL RIGHTS RESERVED.</span>
		</div>
	</div>
</div>


<!-- alert -->
<div class="layer_form alert_layer" style="display: none;">
	<div class="layer_box" style="max-width:480px;">
		<div class="layer_cnt">
			<div class="lf_title">
				<span class="alert_sbj"></span>
				<a href="javascript:;" class="lf_close" onclick="layerHide('alert_layer')">팝업닫기</a>
			</div>
			<div class="lf_content">
				<p class="alert_msg"></p>
				<div class="lf_btns">
					<a href="javascript:;" class="btn submit" onclick="layerHide('alert_layer')">확인</a>
				</div>
			</div>
		</div>
	</div>
	<span class="layer_bg" onclick="layerHide('alert_layer')"></span>
	<span class="blank"></span>
</div>
<!-- //alert -->

<script>
let fileNo = 0;
let filesArr = new Array();

// 첨부파일 추가
function addFile(obj){
    let maxFileCnt = 5;   // 첨부파일 최대 개수
    let attFileCnt = document.querySelectorAll('.filebox').length;    // 기존 추가된 첨부파일 개수
    let remainFileCnt = maxFileCnt - attFileCnt;    // 추가로 첨부가능한 개수
    let curFileCnt = obj.files.length;  // 현재 선택된 첨부파일 개수

    // 첨부파일 개수 확인
    if (curFileCnt > remainFileCnt) {
		$('.alert_layer').show();
		$('.alert_layer .alert_sbj').text('알림');
		$('.alert_layer .alert_msg').text("첨부파일은 최대 " + maxFileCnt + "개 까지 첨부 가능합니다.");
    } else {
        for (const file of obj.files) {
            // 첨부파일 검증
            if (validation(file)) {
                // 파일 배열에 담기
                let reader = new FileReader();
                reader.onload = function () {
                    filesArr.push(file);
                };
                reader.readAsDataURL(file);

                // 목록 추가
                let htmlData = '';
                htmlData += '<div id="file' + fileNo + '" class="filebox">';
                htmlData += '   <span class="name">' + file.name + '</span>';
                htmlData += '   <a href="javascript:;" class="delete" onclick="deleteFile(' + fileNo + ');"></a>';
                htmlData += '</div>';
                $('.file_list').append(htmlData);
                fileNo++;
            } else {
                continue;
            }
        }
    }
    // 초기화
    document.querySelector("input[type=file]").value = "";
}

//첨부파일 검증
function validation(obj){
    const fileTypes = ['application/pdf', 'image/gif', 'image/jpeg', 'image/png', 'image/bmp', 'image/tif', 'application/haansofthwp', 'application/x-hwp', 'application/x-zip-compressed', 'video/mp4'];
	console.log(obj.type);
    if (obj.name.length > 100) {
		$('.alert_layer').show();
		$('.alert_layer .alert_sbj').text('알림');
		$('.alert_layer .alert_msg').text("파일명이 100자 이상인 파일은 제외되었습니다.");
        return false;
    } else if (obj.size > (100 * 1024 * 1024)) {
		$('.alert_layer').show();
		$('.alert_layer .alert_sbj').text('알림');
		$('.alert_layer .alert_msg').text("최대 파일 용량인 100MB를 초과한 파일은 제외되었습니다.");
        return false;
    } else if (obj.name.lastIndexOf('.') == -1) {
		$('.alert_layer').show();
		$('.alert_layer .alert_sbj').text('알림');
		$('.alert_layer .alert_msg').text("확장자가 없는 파일은 제외되었습니다.");
        return false;
    } else if (!fileTypes.includes(obj.type)) {
		$('.alert_layer').show();
		$('.alert_layer .alert_sbj').text('알림');
		$('.alert_layer .alert_msg').text("첨부가 불가능한 파일은 제외되었습니다.");
        return false;
    } else {
        return true;
    }
}

//첨부파일 삭제
function deleteFile(num) {
    document.querySelector("#file" + num).remove();
    filesArr[num].is_delete = true;
}

//폼 전송
/*
function submitForm() {
    // 폼데이터 담기
    let form = document.querySelector("form");
    let formData = new FormData(form);
    for (let i = 0; i < filesArr.length; i++) {
        // 삭제되지 않은 파일만 폼데이터에 담기
        if (!filesArr[i].is_delete) {
            formData.append("attach_file", filesArr[i]);
        }
    }

    $.ajax({
        method: 'POST',
        url: '/register',
        dataType: 'json',
        data: formData,
        async: true,
        timeout: 30000,
        cache: false,
        headers: {'cache-control': 'no-cache', 'pragma': 'no-cache'},
        success: function () {
            alert("파일업로드 성공");
        },
        error: function (xhr, desc, err) {
            alert('에러가 발생 하였습니다.');
            return;
        }
    })
}
*/
</script>
<script src="../assets/js/jquery-ui.min.js"></script>
<script src="../assets/js/common.js"></script>
</body>
</html>	 